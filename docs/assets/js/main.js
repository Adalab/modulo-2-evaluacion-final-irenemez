"use strict";const searchText=document.querySelector(".js-searchText"),searchButton=document.querySelector(".js-searchButton"),resetButton=document.querySelector(".js-resetButton"),cocktailList=document.querySelector(".js-cocktailList"),cocktailFavourites=document.querySelector(".js-cocktailFavourites");let url="https://www.thecocktaildb.com/api/json/v1/1/search.php?s=margarita",cocktailsArray=[],favouritesArray=[];const localFavourites=JSON.parse(localStorage.getItem("localFavourites"));function renderCocktailList(t){cocktailList.innerHTML="";for(const e of t)cocktailList.appendChild(renderCocktails(e,"js-cocktailElement")),setListener()}function renderFavouriteList(t){cocktailFavourites.innerHTML="";for(const e of t)cocktailFavourites.appendChild(renderCocktails(e,"js-fav")),setListener();localStorage.setItem("localFavourites",JSON.stringify(t))}function renderCocktails(t,e){let r="";r=t.strDrinkThumb?t.strDrinkThumb:"https://via.placeholder.com/600x400/ffffff/a0c3d2?text=Cocktail "+t.strDrink;const c=document.createElement("li");c.classList.add("cocktailLiStyle");-1!==favouritesArray.findIndex(e=>e.idDrink===t.idDrink)&&c.classList.add("selected"),c.classList.add(e),c.setAttribute("id",t.idDrink);const o=document.createElement("article");c.appendChild(o);const a=document.createElement("img");a.classList.add("cocktailImgStyle"),a.setAttribute("src",r),a.setAttribute("alt","Cocktail picture"),o.appendChild(a);const s=document.createElement("h3");s.classList.add("cocktailTitle");const i=document.createTextNode(""+t.strDrink);return s.appendChild(i),c.appendChild(s),console.log(t),c}function handleSearch(t){t.preventDefault(),url="https://www.thecocktaildb.com/api/json/v1/1/search.php?s="+searchText.value,fetch(url).then(t=>t.json()).then(t=>{console.log(t),cocktailsArray=t.drinks,renderCocktailList(cocktailsArray)})}function handleReset(){console.log("hola 1"),url="https://www.thecocktaildb.com/api/json/v1/1/search.php?s=margarita",fetch(url).then(t=>t.json()).then(t=>{console.log(t),cocktailsArray=t.drinks,renderCocktailList(cocktailsArray)}),searchText.value="",cocktailFavourites.innerHTML="",localStorage.removeItem("localFavourites"),location.reload()}function handleFavourite(t){const e=t.currentTarget.id;console.log(e),t.currentTarget.classList.toggle("selected");const r=cocktailsArray.find(t=>t.idDrink===e),c=favouritesArray.findIndex(t=>t.idDrink===e);-1===c?favouritesArray.push(r):favouritesArray.splice(c,1),renderFavouriteList(favouritesArray)}function setListener(){const t=document.querySelectorAll(".js-cocktailElement");console.log(t);for(const e of t)e.addEventListener("click",handleFavourite)}localFavourites&&(favouritesArray=localFavourites,renderFavouriteList(favouritesArray)),fetch(url).then(t=>t.json()).then(t=>{console.log(t),cocktailsArray=t.drinks,renderCocktailList(cocktailsArray)}),searchButton.addEventListener("click",handleSearch),resetButton.addEventListener("click",handleReset);